<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lunar Intelligence Center - BlueandCosmos</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet" />
  
  <style>
    :root {
      --accent: #0033a0;
      --flag-blue: #002366;
      --highlight: #ff4081;
      --text-white: #ffffff;
      --text-light: #cce0ff;
      --dark-bg: #121212;
      --dark-accent: #001f5b;
      --card-light: #fafafa;
      --card-dark: #1e1e1e;
      --border-light: #ddd;
      --border-dark: #444;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Work Sans', sans-serif;
      background: linear-gradient(135deg, #000428 0%, #004e92 100%);
      color: white;
      min-height: 100vh;
    }

    /* Header */
    .header {
      background: var(--accent);
      color: var(--text-white);
      padding: 1em 2em;
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 1em;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    /* Left brand block */
    .logo-link {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: inherit;
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 0.4em;
    }

    .logo-area img {
      height: 50px;
      width: 50px;
      margin: 0;
      padding: 0;
      background-color: transparent;
      border-radius: 0;
      display: block;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
      line-height: 1.2;
      margin-left: -4px;
    }

    .logo-text .title {
      font-size: 1.4em;
      font-weight: bold;
      color: #fff;
      margin: 0;
    }

    .logo-text .tagline {
      font-size: 0.85em;
      color: var(--text-light);
      margin: 0;
    }

    /* Page indicator */
    .page-indicator {
      justify-self: center;
      color: var(--text-light);
      font-size: 1.1em;
      font-weight: 500;
    }

    /* Right-side nav wrapper */
    .nav-right {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 1.5em;
    }

    /* Navigation styles */
    nav {
      display: contents;
    }

    .dropdown {
      position: relative;
    }

    .dropbtn {
      background: none;
      border: none;
      font-size: 1em;
      color: #fff;
      cursor: pointer;
      padding: 0.4em 0;
      position: relative;
    }

    .dropbtn:hover,
    .dropbtn:focus {
      color: var(--highlight);
    }

    .dropbtn::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0;
      height: 2px;
      background: var(--highlight);
      transition: width 0.25s ease-in-out;
    }

    .dropdown:hover > .dropbtn::after,
    .dropbtn:focus::after,
    .dropdown.open > .dropbtn::after {
      width: 100%;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      top: calc(100% + 0.6em);
      left: 0;
      background: var(--accent);
      min-width: 200px;
      flex-direction: column;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      z-index: 1001;
      padding: 0.3em 0;
      border-radius: 6px;
    }

    .dropdown:hover .dropdown-content,
    .dropdown:focus-within .dropdown-content,
    .dropdown.open .dropdown-content {
      display: flex;
    }

    .dropdown-content a {
      color: var(--text-light);
      text-decoration: none;
      padding: 0.8em 1em;
      position: relative;
      transition: color 0.2s ease, background-color 0.2s ease, transform 0.15s ease;
    }

    .dropdown-content a:hover,
    .dropdown-content a:focus,
    .dropdown-content a.clicked {
      background-color: var(--flag-blue);
      color: #fff !important;
      transform: translateX(5px);
    }

    .dropdown-content a::after {
      content: "";
      position: absolute;
      left: 1em;
      bottom: 6px;
      width: 0;
      height: 2px;
      background: var(--highlight);
      transition: width 0.25s ease;
    }

    .dropdown-content a:hover::after,
    .dropdown-content a:focus::after,
    .dropdown-content a.clicked::after {
      width: calc(100% - 2em);
    }

    .nav-link {
      color: #fff;
      text-decoration: none;
      position: relative;
      padding-bottom: 2px;
    }

    .nav-link:hover {
      color: var(--highlight);
    }

    .nav-link::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0;
      height: 2px;
      background: var(--highlight);
      transition: width 0.25s ease-in-out;
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .toggle-theme {
      cursor: pointer;
      font-size: 1.5em;
      line-height: 1;
      user-select: none;
    }

    /* Footer */
    footer {
      background-color: var(--accent);
      color: #fff;
      padding: 2em 1em;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      text-align: center;
      gap: 1em;
      margin-top: 3em;
    }

    footer a {
      color: #fff;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 3em 2em;
      background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                  url('https://images.unsplash.com/photo-1446776877081-d282a0f896e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80');
      background-size: cover;
      background-position: center;
    }

    .hero h1 {
      font-size: 3em;
      margin-bottom: 0.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .hero p {
      font-size: 1.2em;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    /* City Selector */
    .city-selector {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 2em;
      margin: 2em auto;
      max-width: 800px;
      border-radius: 15px;
      text-align: center;
    }

    .city-input {
      display: flex;
      gap: 1em;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }

    .city-input input {
      padding: 0.8em 1.2em;
      border: none;
      border-radius: 25px;
      font-size: 1em;
      min-width: 250px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
    }

    .city-input button {
      padding: 0.8em 2em;
      background: var(--highlight);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .city-input button:hover {
      background: #e91e63;
      transform: translateY(-2px);
    }

    /* Main Content */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2em;
    }

    /* Tab Navigation */
    .tab-nav {
      display: flex;
      justify-content: center;
      margin-bottom: 2em;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 0.5em;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 0.8em 1.5em;
      background: transparent;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0.2em;
    }

    .tab-btn.active {
      background: var(--highlight);
      color: white;
    }

    .tab-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Tab Content */
    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease-in;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Cards */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5em;
      margin-bottom: 2em;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 1.5em;
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card h3 {
      color: var(--highlight);
      margin-bottom: 1em;
      font-size: 1.3em;
    }

    .data-row {
      display: flex;
      justify-content: space-between;
      padding: 0.5em 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .data-row:last-child {
      border-bottom: none;
    }

    .data-value {
      font-weight: bold;
      color: #ffd700;
    }

    /* Calendar */
    .calendar-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 2em;
      margin: 2em 0;
    }

    .year-selector {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1em;
      margin-bottom: 2em;
    }

    .year-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.5em 1em;
      border-radius: 5px;
      cursor: pointer;
    }

    .year-display {
      font-size: 1.5em;
      font-weight: bold;
      min-width: 100px;
      text-align: center;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1em;
    }

    .month-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 1em;
      text-align: center;
    }

    .month-title {
      font-weight: bold;
      margin-bottom: 0.5em;
      color: var(--highlight);
    }

    .moon-events {
      font-size: 0.9em;
      line-height: 1.4;
    }

    .event-item {
      margin: 0.3em 0;
      padding: 0.2em;
      border-radius: 3px;
    }

    .new-moon { background: rgba(0, 0, 0, 0.3); }
    .full-moon { background: rgba(255, 215, 0, 0.2); }
    .eclipse { background: rgba(255, 64, 129, 0.2); }
    .supermoon { background: rgba(0, 255, 136, 0.2); }

    /* Current Location Display */
    .current-location {
      text-align: center;
      margin: 1em 0;
      font-size: 1.1em;
      color: var(--text-light);
    }

    .location-icon {
      color: var(--highlight);
      margin-right: 0.5em;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <!-- Left: Brand -->
    <a href="index.html" class="logo-link" aria-label="BlueandCosmos Home">
      <div class="logo-area">
        <img src="https://cdn.jsdelivr.net/gh/swetharajan7/blueandcosmos/assets/logo-transparent.png"
          alt="BlueandCosmos Logo" />
        <div class="logo-text">
          <div class="title">BlueandCosmos</div>
          <div class="tagline">Exploring the Cosmos. Protecting the Earth.</div>
        </div>
      </div>
    </a>

    <!-- Middle: Current Page Indicator -->
    <div class="page-indicator">🌙 Lunar Intelligence Center</div>

    <!-- Right: Nav + Dashboard + Theme Toggle -->
    <nav>
      <div class="nav-right">
        <!-- About -->
        <div class="dropdown" data-menu="about">
          <button class="dropbtn" tabindex="0" aria-haspopup="true" aria-expanded="false">
            About
          </button>
          <div class="dropdown-content" role="menu" aria-label="About submenu">
            <a href="#" role="menuitem">About BlueandCosmos</a>
            <a href="#" role="menuitem">Sustainability</a>
            <a href="#" role="menuitem">My Account</a>
          </div>
        </div>

        <!-- Livestream -->
        <div class="dropdown" data-menu="livestream">
          <button class="dropbtn" tabindex="0" aria-haspopup="true" aria-expanded="false">
            Livestream
          </button>
          <div class="dropdown-content" role="menu" aria-label="Livestream submenu">
            <a href="#" role="menuitem">Live Stream Images</a>
            <a href="#" role="menuitem">Launch Missions</a>
            <a href="#" role="menuitem">Webinars</a>
          </div>
        </div>

        <!-- Dashboard link -->
        <a class="nav-link" href="dashboard.html">Dashboard</a>

        <!-- Theme Toggle -->
        <div class="toggle-theme" id="themeToggle" role="button" aria-label="Toggle theme">
          🌙
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <h1>🌙 Lunar Intelligence Center</h1>
    <p>Your comprehensive guide to lunar phenomena, personalized for your location with 15 years of historical and future data</p>
  </section>

  <!-- City Selector -->
  <section class="city-selector">
    <h2>📍 Set Your Location</h2>
    <p>Get personalized moonrise, moonset, and lunar event times for your city</p>
    <div class="city-input">
      <input type="text" id="cityInput" placeholder="Enter your city (e.g., New York, London, Tokyo)" />
      <button onclick="setLocation()">Update Location</button>
    </div>
    <div class="current-location" id="currentLocation">
      <span class="location-icon">📍</span>Currently showing data for: <strong>New York City, NY</strong>
    </div>
  </section>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button class="tab-btn active" onclick="showTab('current')">🌒 Current Phase</button>
      <button class="tab-btn" onclick="showTab('calendar')">📅 Lunar Calendar</button>
      <button class="tab-btn" onclick="showTab('eclipses')">🌘 Eclipses</button>
      <button class="tab-btn" onclick="showTab('special')">✨ Special Events</button>
      <button class="tab-btn" onclick="showTab('tides')">🌊 Tidal Data</button>
    </nav>

    <!-- Current Phase Tab -->
    <div id="current" class="tab-content active">
      <div class="card-grid">
        <div class="card">
          <h3>🌒 Current Moon Phase</h3>
          <div id="currentPhaseData">
            <div class="data-row">
              <span>Phase</span>
              <span class="data-value" id="currentPhase">Waxing Crescent</span>
            </div>
            <div class="data-row">
              <span>Illumination</span>
              <span class="data-value" id="illumination">23%</span>
            </div>
            <div class="data-row">
              <span>Age</span>
              <span class="data-value" id="moonAge">3.2 days</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>🌅 Rise & Set Times</h3>
          <div id="riseSetData">
            <div class="data-row">
              <span>Moonrise</span>
              <span class="data-value" id="moonrise">9:42 PM</span>
            </div>
            <div class="data-row">
              <span>Moonset</span>
              <span class="data-value" id="moonset">11:15 AM</span>
            </div>
            <div class="data-row">
              <span>Transit (Highest)</span>
              <span class="data-value" id="transit">6:28 AM</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>📏 Lunar Distance</h3>
          <div id="distanceData">
            <div class="data-row">
              <span>Distance from Earth</span>
              <span class="data-value" id="distance">384,400 km</span>
            </div>
            <div class="data-row">
              <span>Angular Size</span>
              <span class="data-value" id="angularSize">29.5 arcmin</span>
            </div>
            <div class="data-row">
              <span>Next Apogee</span>
              <span class="data-value" id="nextApogee">Aug 15</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Calendar Tab -->
    <div id="calendar" class="tab-content">
      <div class="calendar-container">
        <h2>📅 15-Year Lunar Calendar (2015-2030)</h2>
        <div class="year-selector">
          <button class="year-btn" onclick="changeYear(-1)">← Previous</button>
          <div class="year-display" id="currentYear">2025</div>
          <button class="year-btn" onclick="changeYear(1)">Next →</button>
        </div>
        <div class="calendar-grid" id="calendarGrid">
          <!-- Calendar will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Eclipses Tab -->
    <div id="eclipses" class="tab-content">
      <div class="card-grid">
        <div class="card">
          <h3>🌘 Upcoming Lunar Eclipses</h3>
          <div id="lunarEclipses">
            <div class="data-row">
              <span>March 14, 2025</span>
              <span class="data-value">Total Lunar Eclipse</span>
            </div>
            <div class="data-row">
              <span>September 7, 2025</span>
              <span class="data-value">Partial Lunar Eclipse</span>
            </div>
            <div class="data-row">
              <span>March 3, 2026</span>
              <span class="data-value">Total Lunar Eclipse</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>🌑 Upcoming Solar Eclipses</h3>
          <div id="solarEclipses">
            <div class="data-row">
              <span>March 29, 2025</span>
              <span class="data-value">Partial Solar Eclipse</span>
            </div>
            <div class="data-row">
              <span>September 21, 2025</span>
              <span class="data-value">Partial Solar Eclipse</span>
            </div>
            <div class="data-row">
              <span>February 17, 2026</span>
              <span class="data-value">Annular Solar Eclipse</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Special Events Tab -->
    <div id="special" class="tab-content">
      <div class="card-grid">
        <div class="card">
          <h3>🌕 Supermoons</h3>
          <div id="supermoons">
            <div class="data-row">
              <span>October 17, 2024</span>
              <span class="data-value">Hunter's Supermoon</span>
            </div>
            <div class="data-row">
              <span>November 15, 2024</span>
              <span class="data-value">Beaver Supermoon</span>
            </div>
            <div class="data-row">
              <span>October 7, 2025</span>
              <span class="data-value">Harvest Supermoon</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>🔵 Blue Moons</h3>
          <div id="bluemoons">
            <div class="data-row">
              <span>May 31, 2026</span>
              <span class="data-value">Seasonal Blue Moon</span>
            </div>
            <div class="data-row">
              <span>December 31, 2028</span>
              <span class="data-value">Monthly Blue Moon</span>
            </div>
            <div class="data-row">
              <span>January 30, 2029</span>
              <span class="data-value">Monthly Blue Moon</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>🩸 Blood Moons</h3>
          <div id="bloodmoons">
            <div class="data-row">
              <span>March 14, 2025</span>
              <span class="data-value">Total Lunar Eclipse</span>
            </div>
            <div class="data-row">
              <span>March 3, 2026</span>
              <span class="data-value">Total Lunar Eclipse</span>
            </div>
            <div class="data-row">
              <span>December 31, 2028</span>
              <span class="data-value">Total Lunar Eclipse</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tides Tab -->
    <div id="tides" class="tab-content">
      <div class="card-grid">
        <div class="card">
          <h3>🌊 Today's Tides</h3>
          <div id="todayTides">
            <div class="data-row">
              <span>High Tide</span>
              <span class="data-value">6:42 AM (4.2 ft)</span>
            </div>
            <div class="data-row">
              <span>Low Tide</span>
              <span class="data-value">12:15 PM (0.8 ft)</span>
            </div>
            <div class="data-row">
              <span>High Tide</span>
              <span class="data-value">7:28 PM (4.1 ft)</span>
            </div>
            <div class="data-row">
              <span>Low Tide</span>
              <span class="data-value">1:05 AM (0.9 ft)</span>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>📊 Tidal Influence</h3>
          <div id="tidalInfluence">
            <div class="data-row">
              <span>Current Moon Phase Effect</span>
              <span class="data-value">Moderate</span>
            </div>
            <div class="data-row">
              <span>Next Spring Tide</span>
              <span class="data-value">Aug 12 (Full Moon)</span>
            </div>
            <div class="data-row">
              <span>Next Neap Tide</span>
              <span class="data-value">Aug 19 (Last Quarter)</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <!-- Left: App Store Logos -->
    <div style="flex: 1; display: flex; flex-direction: column; align-items: flex-start; gap: 0.5em;">
      <a href="#">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg"
          alt="Google Play Store" style="height: 40px;" />
      </a>
      <a href="#">
        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Apple Store"
          style="height: 40px;" />
      </a>
    </div>

    <!-- Center: Legal Links and Trademark -->
    <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 0.5em;">
      <div style="font-weight: bold;">BlueandCosmos™ 2025</div>
      <div style="display: flex; flex-wrap: wrap; gap: 1em; justify-content: center; font-size: 0.9em;">
        <a href="privacy.html">Privacy Policy</a>
        <a href="terms.html">Terms of Use</a>
        <a href="sitemap.html">Sitemap</a>
        <a href="contact.html">Contact Us</a>
      </div>
    </div>

    <!-- Right: Social Media and "Let's Connect!" -->
    <div style="flex: 1; display: flex; flex-direction: column; align-items: flex-end; gap: 0.5em;">
      <div style="font-weight: bold;">Let's Connect!</div>
      <div style="display: flex; gap: 0.5em;">
        <a href="https://twitter.com/">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitter.svg" alt="Twitter"
            style="height: 24px; filter: invert(1);" />
        </a>
        <a href="https://facebook.com/">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook"
            style="height: 24px; filter: invert(1);" />
        </a>
        <a href="https://instagram.com/">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram"
            style="height: 24px; filter: invert(1);" />
        </a>
        <a href="https://linkedin.com/">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg" alt="LinkedIn"
            style="height: 24px; filter: invert(1);" />
        </a>
        <a href="https://discord.com/">
          <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg" alt="Discord"
            style="height: 24px; filter: invert(1);" />
        </a>
      </div>
    </div>
  </footer>

  <script>
    let currentCity = "New York City, NY";
    let currentYear = 2025;

    // Tab functionality
    function showTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active class from all buttons
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      
      // Add active class to clicked button
      event.target.classList.add('active');
    }

    // Location functionality
    function setLocation() {
      const cityInput = document.getElementById('cityInput');
      const newCity = cityInput.value.trim();
      
      if (newCity) {
        currentCity = newCity;
        document.getElementById('currentLocation').innerHTML = 
          `<span class="location-icon">📍</span>Currently showing data for: <strong>${currentCity}</strong>`;
        
        // Update all location-specific data
        updateLocationData();
        cityInput.value = '';
      }
    }

    // Update data based on location
    function updateLocationData() {
      console.log(`Updating data for ${currentCity}`);
      
      // Generate location-specific data based on city
      const locationData = generateLocationData(currentCity);
      
      // Update rise/set times
      document.getElementById('moonrise').textContent = locationData.moonrise;
      document.getElementById('moonset').textContent = locationData.moonset;
      document.getElementById('transit').textContent = locationData.transit;
      
      // Update distance data
      document.getElementById('distance').textContent = locationData.distance;
      document.getElementById('angularSize').textContent = locationData.angularSize;
      
      // Update tidal data if near coast
      if (locationData.hasCoast) {
        updateTidalData(locationData.tides);
      }
    }

    function generateLocationData(city) {
      // Simulate different data based on city
      const cityLower = city.toLowerCase();
      let baseHour = 21; // Default moonrise hour
      let baseMinute = 42;
      
      // Adjust times based on city (simplified timezone/latitude simulation)
      if (cityLower.includes('london') || cityLower.includes('uk')) {
        baseHour = 20;
        baseMinute = 15;
      } else if (cityLower.includes('tokyo') || cityLower.includes('japan')) {
        baseHour = 22;
        baseMinute = 30;
      } else if (cityLower.includes('los angeles') || cityLower.includes('california')) {
        baseHour = 21;
        baseMinute = 55;
      } else if (cityLower.includes('sydney') || cityLower.includes('australia')) {
        baseHour = 19;
        baseMinute = 20;
      }
      
      const moonriseTime = `${baseHour % 12 || 12}:${baseMinute.toString().padStart(2, '0')} ${baseHour >= 12 ? 'PM' : 'AM'}`;
      const moonsetHour = (baseHour + 14) % 24;
      const moonsetTime = `${moonsetHour % 12 || 12}:${(baseMinute + 33) % 60} ${moonsetHour >= 12 ? 'PM' : 'AM'}`;
      const transitHour = (baseHour + 7) % 24;
      const transitTime = `${transitHour % 12 || 12}:${(baseMinute + 46) % 60} ${transitHour >= 12 ? 'PM' : 'AM'}`;
      
      // Vary distance slightly
      const baseDistance = 384400;
      const variation = Math.floor(Math.random() * 20000) - 10000;
      const distance = `${(baseDistance + variation).toLocaleString()} km`;
      
      const hasCoast = cityLower.includes('new york') || cityLower.includes('london') || 
                      cityLower.includes('sydney') || cityLower.includes('miami') ||
                      cityLower.includes('san francisco') || cityLower.includes('boston');
      
      return {
        moonrise: moonriseTime,
        moonset: moonsetTime,
        transit: transitTime,
        distance: distance,
        angularSize: `${(29.5 + Math.random() * 2 - 1).toFixed(1)} arcmin`,
        hasCoast: hasCoast,
        tides: hasCoast ? generateTidalData() : null
      };
    }

    function generateTidalData() {
      const now = new Date();
      const tides = [];
      
      for (let i = 0; i < 4; i++) {
        const time = new Date(now.getTime() + (i * 6 + Math.random() * 2 - 1) * 60 * 60 * 1000);
        const height = (Math.random() * 3 + 1).toFixed(1);
        const type = i % 2 === 0 ? 'High' : 'Low';
        
        tides.push({
          time: time.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' }),
          height: height,
          type: type
        });
      }
      
      return tides;
    }

    function updateTidalData(tides) {
      if (!tides) return;
      
      const tidesContainer = document.getElementById('todayTides');
      tidesContainer.innerHTML = tides.map(tide => 
        `<div class="data-row">
          <span>${tide.type} Tide</span>
          <span class="data-value">${tide.time} (${tide.height} ft)</span>
        </div>`
      ).join('');
    }

    // Calendar functionality
    function changeYear(direction) {
      const newYear = currentYear + direction;
      if (newYear >= 2015 && newYear <= 2030) {
        currentYear = newYear;
        document.getElementById('currentYear').textContent = currentYear;
        generateCalendar(currentYear);
      }
    }

    function generateCalendar(year) {
      const calendarGrid = document.getElementById('calendarGrid');
      const months = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ];

      calendarGrid.innerHTML = '';

      months.forEach((month, index) => {
        const monthCard = document.createElement('div');
        monthCard.className = 'month-card';
        
        // Generate sample lunar events for each month
        const events = generateLunarEvents(year, index);
        
        monthCard.innerHTML = `
          <div class="month-title">${month} ${year}</div>
          <div class="moon-events">
            ${events.map(event => `<div class="event-item ${event.type}">${event.date}: ${event.name}</div>`).join('')}
          </div>
        `;
        
        calendarGrid.appendChild(monthCard);
      });
    }

    function generateLunarEvents(year, month) {
      const events = [];
      
      // Calculate approximate lunar cycle (29.53 days)
      // This is a simplified calculation - real implementation would use precise astronomical algorithms
      const baseNewMoon = new Date(2024, 0, 11); // Known new moon date
      const lunarCycle = 29.53;
      
      // Calculate days since base new moon
      const targetMonth = new Date(year, month, 1);
      const daysSinceBase = (targetMonth - baseNewMoon) / (1000 * 60 * 60 * 24);
      const cyclesSinceBase = daysSinceBase / lunarCycle;
      const daysIntoCurrentCycle = (cyclesSinceBase - Math.floor(cyclesSinceBase)) * lunarCycle;
      
      // Calculate moon phases for this month
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      let currentDay = 1 - daysIntoCurrentCycle;
      
      while (currentDay <= daysInMonth + lunarCycle) {
        if (currentDay >= 1 && currentDay <= daysInMonth) {
          const day = Math.round(currentDay);
          events.push({ date: day.toString(), name: 'New Moon', type: 'new-moon' });
        }
        
        const firstQuarter = currentDay + 7.38;
        if (firstQuarter >= 1 && firstQuarter <= daysInMonth) {
          const day = Math.round(firstQuarter);
          events.push({ date: day.toString(), name: 'First Quarter', type: 'quarter' });
        }
        
        const fullMoon = currentDay + 14.77;
        if (fullMoon >= 1 && fullMoon <= daysInMonth) {
          const day = Math.round(fullMoon);
          events.push({ date: day.toString(), name: 'Full Moon', type: 'full-moon' });
        }
        
        const lastQuarter = currentDay + 22.15;
        if (lastQuarter >= 1 && lastQuarter <= daysInMonth) {
          const day = Math.round(lastQuarter);
          events.push({ date: day.toString(), name: 'Last Quarter', type: 'quarter' });
        }
        
        currentDay += lunarCycle;
      }
      
      // Add special events
      addSpecialEvents(events, year, month);
      
      // Sort events by date
      events.sort((a, b) => parseInt(a.date) - parseInt(b.date));
      
      return events;
    }

    function addSpecialEvents(events, year, month) {
      // Add eclipses (simplified - real dates would come from astronomical databases)
      const eclipses = [
        { year: 2025, month: 2, day: 14, name: 'Total Lunar Eclipse', type: 'eclipse' },
        { year: 2025, month: 8, day: 7, name: 'Partial Lunar Eclipse', type: 'eclipse' },
        { year: 2026, month: 2, day: 3, name: 'Total Lunar Eclipse', type: 'eclipse' }
      ];
      
      eclipses.forEach(eclipse => {
        if (eclipse.year === year && eclipse.month === month) {
          events.push({ date: eclipse.day.toString(), name: eclipse.name, type: eclipse.type });
        }
      });
      
      // Add supermoons (when full moon coincides with perigee)
      const supermoons = [
        { year: 2024, month: 9, day: 17, name: 'Supermoon', type: 'supermoon' },
        { year: 2024, month: 10, day: 15, name: 'Supermoon', type: 'supermoon' },
        { year: 2025, month: 9, day: 7, name: 'Supermoon', type: 'supermoon' }
      ];
      
      supermoons.forEach(supermoon => {
        if (supermoon.year === year && supermoon.month === month) {
          events.push({ date: supermoon.day.toString(), name: supermoon.name, type: supermoon.type });
        }
      });
    }

    // Theme toggle functionality
    function toggleTheme() {
      const body = document.body;
      const toggle = document.getElementById("themeToggle");
      body.classList.toggle("dark");
      toggle.textContent = body.classList.contains("dark") ? "☀️" : "🌙";
      localStorage.setItem("theme", body.classList.contains("dark") ? "dark" : "light");
    }

    // Dropdown functionality
    function initDropdowns() {
      const OPEN_CLASS = "open";
      const HOVER_DELAY_MS = 160;

      document.querySelectorAll(".dropdown").forEach((dd) => {
        let closeTimer = null;
        const btn = dd.querySelector(".dropbtn");
        const menu = dd.querySelector(".dropdown-content");

        function open() {
          dd.classList.add(OPEN_CLASS);
          if (btn) btn.setAttribute("aria-expanded", "true");
          if (closeTimer) {
            clearTimeout(closeTimer);
            closeTimer = null;
          }
        }
        function scheduleClose() {
          if (closeTimer) clearTimeout(closeTimer);
          closeTimer = setTimeout(() => {
            dd.classList.remove(OPEN_CLASS);
            if (btn) btn.setAttribute("aria-expanded", "false");
          }, HOVER_DELAY_MS);
        }

        dd.addEventListener("pointerenter", open);
        dd.addEventListener("pointerleave", scheduleClose);

        btn?.addEventListener("focus", open);
        menu?.addEventListener("focusout", (e) => {
          if (!dd.contains(e.relatedTarget)) scheduleClose();
        });

        menu?.querySelectorAll("a").forEach((a) => {
          a.addEventListener("click", () => {
            menu.querySelectorAll("a").forEach((el) => el.classList.remove("clicked"));
            a.classList.add("clicked");
            dd.classList.remove(OPEN_CLASS);
            if (btn) btn.setAttribute("aria-expanded", "false");
          });
        });
      });
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      generateCalendar(currentYear);
      initDropdowns();
      
      // Initialize theme
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
        const toggle = document.getElementById("themeToggle");
        if (toggle) toggle.textContent = "☀️";
      }
      
      // Theme toggle event
      document.getElementById("themeToggle")?.addEventListener("click", toggleTheme);
      
      // Allow Enter key in city input
      document.getElementById('cityInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          setLocation();
        }
      });
      
      // Initialize with default location data
      updateLocationData();
    });
  </script>
</body>
</html>